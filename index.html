<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>MindfulTime - 價值追蹤器</title>
    
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="theme-color" content="#FFF9F5">
    
    <link rel="apple-touch-icon" href="https://cdn-icons-png.flaticon.com/512/3233/3233483.png">
    <link rel="icon" type="image/png" href="https://cdn-icons-png.flaticon.com/512/3233/3233483.png">

    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <script src="https://unpkg.com/recharts/umd/Recharts.min.js"></script>
    
    <script src="https://unpkg.com/lucide-react/dist/umd/lucide-react.min.js"></script>

    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              cream: '#FFF9F5', 'cream-dark': '#F5EBE0',
              text: { main: '#5D5F71', light: '#8E91A0' },
              brand: { 50: '#F2FCF5', 100: '#E1F7E7', 500: '#88D4AB', 600: '#6FC295', 900: '#2D5B45' },
              waste: { 500: '#FFB7B2' }, rest: { 500: '#AECBFA' },
              accent: { yellow: '#FDE68A', purple: '#E9D5FF' }
            },
            fontFamily: { sans: ['Quicksand', 'sans-serif'] }
          }
        }
      }
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
      body { font-family: 'Quicksand', 'Noto Sans TC', sans-serif; background-color: #FFF9F5; color: #5D5F71; overscroll-behavior-y: none; -webkit-tap-highlight-color: transparent; }
      ::-webkit-scrollbar { display: none; }
      .btn-card:active { transform: scale(0.96); transition: transform 0.1s; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        // --- 這裡將 UMD 全域變數轉為我們習慣的變數 ---
        const { useState, useEffect, useMemo } = React;
        const { createRoot } = ReactDOM;
        // 從 window.Recharts 取出元件
        const { PieChart, Pie, Cell, ResponsiveContainer, Tooltip, Legend } = Recharts;
        // 從 window.LucideReact 取出圖示
        const { LayoutDashboard, Settings, BarChart2, Brain, Smartphone, Activity, RefreshCcw, ShoppingBag, Dumbbell, Clock, Briefcase, Monitor } = LucideReact;

        // 你的後端網址
        const GAS_URL = "https://script.google.com/macros/s/AKfycbyyP_FqWOFoJcnnZBit3xc_KR3YRpatQfgOgubnngq83TFJoWuZ3Z6VKvlOUFsUX-0CwA/exec"; 
        
        const CATEGORIES = [
          { id: '知識', label: '知識學習', icon: <Briefcase size={28}/>, color: 'bg-blue-100 text-blue-600', chartColor: '#3B82F6' },
          { id: 'AI', label: 'AI 研究', icon: <Brain size={28}/>, color: 'bg-indigo-100 text-indigo-600', chartColor: '#6366F1' },
          { id: '娛樂', label: '休閒娛樂', icon: <Monitor size={28}/>, color: 'bg-purple-100 text-purple-600', chartColor: '#8B5CF6' },
          { id: '運動', label: '運動健身', icon: <Dumbbell size={28}/>, color: 'bg-emerald-100 text-emerald-600', chartColor: '#10B981' },
          { id: '社群', label: '社群媒體', icon: <Smartphone size={28}/>, color: 'bg-pink-100 text-pink-600', chartColor: '#EC4899' },
          { id: '購物', label: '購物消費', icon: <ShoppingBag size={28}/>, color: 'bg-rose-100 text-rose-600', chartColor: '#F43F5E' },
